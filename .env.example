# ------------------------------------------------------------------------------
# Application environment
# ------------------------------------------------------------------------------
# For local development only. In production, the platform (e.g. Vercel / Docker)
# should set NODE_ENV=production automatically.
NODE_ENV=development

# ------------------------------------------------------------------------------
# Database (Postgres)
# ------------------------------------------------------------------------------
# Primary Postgres database URL used by Prisma and the app.
# This example is for LOCAL DEVELOPMENT ONLY.
# DO NOT reuse this URL (or these credentials) in staging/production.
#
# Prisma also accepts "postgresql://" prefix; choose one and stay consistent.
DATABASE_URL=postgres://ghostuser:ghostpass@localhost:5432/donotghostme_dev

# ------------------------------------------------------------------------------
# Rate limiting & privacy
# ------------------------------------------------------------------------------
# Secret HMAC salt used to hash IP addresses before storing them.
# MUST be at least 32 characters long and cryptographically random.
# In production, generate a unique value per environment, for example:
#   openssl rand -hex 32
RATE_LIMIT_IP_SALT=REPLACE_WITH_STRONG_RANDOM_HEX_STRING

# Max number of reports per company for a single IP (1–5, default 3)
RATE_LIMIT_MAX_REPORTS_PER_COMPANY_PER_IP=3

# Max number of reports per day for a single IP across all companies (1–20, default 10)
RATE_LIMIT_MAX_REPORTS_PER_IP_PER_DAY=10

# Rate limit for /api/companies/search endpoint (10–200 req/window, default 60)
RATE_LIMIT_COMPANY_SEARCH_MAX_REQUESTS=60

# Rate limit window for company search in milliseconds (10000–300000, default 60000)
RATE_LIMIT_COMPANY_SEARCH_WINDOW_MS=60000

# Rate limit for /api/reports/stats endpoint (5–100 req/window, default 30)
RATE_LIMIT_REPORTS_STATS_MAX_REQUESTS=30

# Rate limit window for reports stats in milliseconds (10000–300000, default 60000)
RATE_LIMIT_REPORTS_STATS_WINDOW_MS=60000

# ------------------------------------------------------------------------------
# Admin dashboard configuration (optional)
# ------------------------------------------------------------------------------
# If you leave these unset, /admin will effectively be disabled.
# NEVER commit real admin credentials to version control.
# Always override these with secure values in real environments.

# Plain-text admin password for the login form.
# In production, choose a strong, unique password and store it as a secret.
ADMIN_PASSWORD=change-this-password

# Secret used to sign and verify admin session tokens (HMAC).
# MUST be a long, random string (e.g. 32+ bytes of hex).
# Use a different value per environment.
ADMIN_SESSION_SECRET=change-this-to-a-long-random-string

# Optional: restrict which Host header is allowed to serve /admin.
# Example (local): 127.0.0.1:3000
# Example (prod):   admin.yourdomain.com
ADMIN_ALLOWED_HOST=127.0.0.1:3000

# CSRF secret for the admin login form.
# This value is for LOCAL DEV ONLY. Do not reuse it in production.
ADMIN_CSRF_SECRET=dev-only-admin-csrf-secret-change-me

# ------------------------------------------------------------------------------
# Optional application logging config
# ------------------------------------------------------------------------------
# Uncomment to enable file-based logging instead of pure stdout.
# Make sure the directory exists and is writable by the app user.
# APP_LOG_TO_FILE=true
# APP_LOG_FILE=logs/app.log

# ------------------------------------------------------------------------------
# Public API: Company intel (browser extension)
# ------------------------------------------------------------------------------
# Controls k-anonymity behavior for GET /api/public/company-intel.
# When enforced, companies with fewer than K ACTIVE reports return:
#   { "status": "insufficient_data" }
#
# Early-stage datasets: set this to false so low-sample companies still return
# an aggregated response (with confidence likely "low").
# Later, when the dataset is large enough, set this to true in production.
COMPANY_INTEL_ENFORCE_K_ANONYMITY=false

# Minimum total ACTIVE reports required when k-anonymity is enforced.
# Default: 5
COMPANY_INTEL_K_ANONYMITY=5
